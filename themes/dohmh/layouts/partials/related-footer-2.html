<section class="related-reading">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="card bg-white text-green mb-2 p-2 text-primary fs-lg">
                   <strong class="border-bottom">Related content</strong>
                </div>
            </div>

            <div class="col-12">
              <div class="card bg-white text-green mb-2 p-2 text-primary fs-md">
                <p><span class="home-label font-weight-bold">Topics:</span><br>
                    <!--sets variables-->
                    {{- $page_link := .RelPermalink -}}
                    {{- $cats := .Params.categories -}}

                    {{- range where (where .Site.Pages "Section" "key-topics") ".File.BaseFileName" "index" -}}
                    <!--$page equals values we find when ranging through-->
                    {{- $page := . -}}

                    <!--set variable equal to intersection of categories - page that we're on, and pages we ranged through-->
                    {{- $has_common_cats := intersect $cats .Params.categories | len | lt 0 -}}

                    <!--Show commonalities, except for page we're on -->
                    {{- if and $has_common_cats (ne $page_link $page.RelPermalink) -}}
                    <a href="{{ $page.RelPermalink }}">{{ $page.Title }}</a> <span class="mx-1 text-black">|</span>
                    {{- end -}} 
                    {{- end -}}
                  </p>

              </div>

            </div>

            <div class="col-lg h-100">
                <div class="card bg-white text-black mb-2 h-100">
                  <div class="card-header"><h4 class="fs-md text-muted"><i class="fas fa-passport text-muted mr-1" aria-hidden="true"></i>Data Stories</h4>
                  </div>
                  <div class="card-body fs-sm overflow-fade-about" style="">
                    {{- partial "related" (dict "section" "data-stories" "layout" "singlelist" "content" . ) -}}
                  </div>
                </div>
              </div>
              <!-- .col for city -->
        
              <div class="col-lg h-100">
                <div class="card bg-white text-black mb-2">
                  <div class="card-header"><h4 class="fs-md text-muted"><i class="fas fa-chart-bar text-muted mr-1" aria-hidden="true"></i>Data Features</h4>
                  </div>
                  <div class="card-body fs-sm">
                      {{- partial "related" (dict "section" "data-features" "layout" "singlelist" "content" . ) -}}

                  </div>
                </div>

                  <div class="card bg-white text-black mb-2">
                    <div class="card-header"><h4 class="fs-md text-muted"><i class="fas fa-map-marked-alt text-muted mr-1" aria-hidden="true"></i>Neighborhood Reports</h4>
                    </div>
                    <div class="card-body fs-sm">
                        {{- partial "related" (dict "section" "neighborhood-reports" "layout" "singlelist" "content" . ) -}}

                    </div>
                  </div>
              </div>
              <!-- .col for you -->
        
              <div class="col-lg h-100">
                <div class="card bg-white text-black h-100">
                  <div class="card-header"><h4 class="fs-md text-muted"><i class="fas fa-chart-line text-muted mr-1" aria-hidden="true"></i>Data Explorer</h4>
                  </div>
                  <div class="card-body fs-sm overflow-fade-about">
                    {{- partial "related" (dict "section" "data-explorer" "layout" "singlelist" "content" . ) -}}
                </div>
                </div>
              </div>
              <!-- .col for data -->
        </div>
    </div>
</section>