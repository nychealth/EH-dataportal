{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "PM2.5 in micrograms per cubic meter",
    "data": {"url": "data/nyccas_realtime_DEC.csv"},
    "config": {
      "legend": {
        "disable": true
      },
      "background": "#ffffff00",
      "axisX": {
          "grid": false,
          "ticks": true,
          "labels": true
      },
      "axisY": {
          "domain": false,
          "ticks": false,
          "gridDash": [
              2
          ],
          "gridWidth": 1
      },
      "view": {
          "stroke": "transparent"
      }
    },
    "height": "container",
    "width": "container",
    "mark": {
      "type": "line", 
      "point": {
        "size": 5,
        "opacity": 0.5
      }, 
      "tooltip": true
      },
    "encoding": {
      "x": {
        "field": "starttime", 
        "type": "temporal",
        "title": "",
        "axis": {
            "offset": 0,
            "domainDashOffset": 30,
            "labelAlign": "center",
            "labelExpr": "[timeFormat(datum.value, '%H') == 0 ? timeFormat(datum.value, '%b %e') : timeFormat(datum.value, '%-I %p')]",
            "labelPadding": 4,
            "labelOverlap": "parity",
            "tickSize": {
                "condition": {"test": {"field": "value", "timeUnit": "hours", "equal": 0}, "value": 15},
                "value": 9
            },
            "tickWidth": {
                "condition": {"test": {"field": "value", "timeUnit": "hours", "equal": 0}, "value": 1.25},
                "value": 0.5
            }
        }
      
      },
      "y": {
        "field": "Value", 
        "type": "quantitative",
        "title": " ",
        "axis": {
            "offset": 10
        }},
      "color": {
        "field": "SiteName", 
        "type": "nominal",
        "scale": {
          "range": ["blue", "yellow", "orange", "red", "green","gray"]
          }
        },
        "opacity": {
          "value": 0.7
        },
        "tooltip": [
            {
              "field": "SiteName",
              "title": "Location"
          },
          {
              "field": "Value",
              "title": "PM2.5 (Âµg/m3)"
          },
          {
              "field": "starttime",
              "type": "temporal",
              "title": "Time",
              "timeUnit": "hoursminutes",
              "format": "%I:%M %p"
          },
          {
              "field": "starttime",
              "type": "temporal",
              "title": "Date"
          }
      ]
  
    }
  }
  