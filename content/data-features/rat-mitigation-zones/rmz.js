// ===== RMZ GEOJSON ================================================== //
var rmz = {"type":"FeatureCollection","features":[{"type":"Feature","id":1,"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.943845701999976,40.70300583900007],[-73.943499691999989,40.703038909000043],[-73.943015485999979,40.703085185000077],[-73.943039686999953,40.70323356800003],[-73.943051137999987,40.703303782000035],[-73.943061311999941,40.703366163000055],[-73.943073271999936,40.703439490000051],[-73.943085104999966,40.703512051000075],[-73.943107575999989,40.703649831000064],[-73.94322058299997,40.703793580000024],[-73.943267086999981,40.704070013000035],[-73.943171510999946,40.704078996000078],[-73.943182349999972,40.704143424000051],[-73.943218331999958,40.704357315000038],[-73.943339945999981,40.70434556400005],[-73.944030771999962,40.704278815000066],[-73.944299547999947,40.704252843000063],[-73.944207753999933,40.703700787000059],[-73.944182854999951,40.703550010000072],[-73.944090290999952,40.702982463000069],[-73.943845701999976,40.70300583900007]]],[[[-73.91560138799997,40.702054301000032],[-73.916326223999988,40.70250696800008],[-73.917051804999971,40.702961091000077],[-73.917778720999934,40.703413146000059],[-73.918504759999962,40.703865927000038],[-73.919231765999939,40.70431962300006],[-73.919958935999944,40.704772395000077],[-73.920684992999952,40.705224864000058],[-73.921411104999947,40.705678715000033],[-73.922137391999968,40.706131923000044],[-73.922864875999949,40.706583895000051],[-73.923592343999985,40.707037211000056],[-73.923935394999944,40.707254129000034],[-73.924170440999944,40.707402750000028],[-73.924908457999948,40.706752695000034],[-73.925139012999978,40.706547205000049],[-73.925897556999985,40.705885108000075],[-73.926090691999946,40.705688002000045],[-73.926579384999968,40.705564638000055],[-73.928110713999956,40.704972240000075],[-73.928739123999947,40.70472525100007],[-73.929801334999979,40.704312830000049],[-73.930238281999948,40.704139431000044],[-73.931156731999977,40.703780635000044],[-73.93173010999999,40.703554291000046],[-73.932699241999956,40.703178690000072],[-73.933524018999947,40.702857281000036],[-73.933952321999982,40.702682892000041],[-73.935337922999963,40.702323125000078],[-73.936982133999948,40.701918577000072],[-73.937144667999974,40.702304502000061],[-73.937264599999935,40.702591151000036],[-73.937319348999949,40.702722001000041],[-73.93763268899994,40.70338177900004],[-73.937785033999944,40.703532941000049],[-73.937947186999963,40.703628544000026],[-73.938410975999943,40.703908384000044],[-73.938489435999941,40.70396287300008],[-73.938600442999984,40.704074938000076],[-73.938815302999956,40.704271490000053],[-73.939128479999965,40.704574219000051],[-73.939313770999945,40.704823040000065],[-73.93951182099994,40.704866938000066],[-73.939517548999959,40.70487190800003],[-73.939549492999959,40.705080600000031],[-73.939613087999987,40.705501730000037],[-73.939643211999964,40.705701618000035],[-73.939667757999985,40.705864774000077],[-73.939706808999972,40.706121894000034],[-73.940063759999987,40.706093039000052],[-73.940526229999989,40.706050571000048],[-73.941012268999941,40.706008968000049],[-73.941142476999971,40.70599793100007],[-73.941367795999952,40.70597508600008],[-73.941955184999983,40.705919753000046],[-73.942446274999952,40.705873489000055],[-73.94243473299997,40.705798945000026],[-73.942413006999971,40.705658612000036],[-73.942402662999939,40.705591809000055],[-73.942391688999976,40.705520934000049],[-73.942359339999939,40.705311987000073],[-73.942336212999976,40.705162619000077],[-73.942420371999958,40.705154690000029],[-73.942386643999953,40.704942746000029],[-73.942298028999971,40.704951096000059],[-73.942287765999936,40.70488659800003],[-73.942202402999953,40.704894639000031],[-73.942057468999963,40.704908292000027],[-73.942012463999959,40.704625485000065],[-73.941411037999956,40.704681932000028],[-73.941162614999939,40.704705247000049],[-73.941031492999969,40.704644481000059],[-73.940894266999976,40.703922457000033],[-73.940780788999973,40.703230769000072],[-73.940766207999957,40.703142333000073],[-73.940677150999988,40.702600240000038],[-73.940621362999934,40.702263750000043],[-73.94060034599994,40.702136258000053],[-73.940545959999952,40.701806344000033],[-73.940421973999946,40.701084897000044],[-73.941932183999938,40.700733533000061],[-73.944389281999975,40.700432822000039],[-73.944244257999969,40.699707578000073],[-73.944097308999972,40.698981253000056],[-73.943950868999934,40.698229578000053],[-73.944954726999981,40.698120415000062],[-73.94515195799994,40.698098017000063],[-73.945250588999954,40.698086815000067],[-73.945579330999976,40.698049479000076],[-73.945678360999977,40.698038232000044],[-73.946079957999984,40.697992619000047],[-73.946182997999983,40.697980915000073],[-73.946343759999934,40.697962655000026],[-73.946442799999943,40.697951405000026],[-73.946797453999977,40.697911121000061],[-73.949648721999949,40.697591344000045],[-73.949693289999971,40.697821131000069],[-73.94971243599997,40.697919840000054],[-73.949743602999945,40.698080526000069],[-73.949761795999962,40.698174321000067],[-73.949774035999951,40.698237427000038],[-73.949789740999961,40.698318398000026],[-73.94981192399996,40.698423906000073],[-73.949884589999954,40.698769507000065],[-73.949907794999945,40.698879866000027],[-73.949916736999967,40.698922392000043],[-73.949944740999968,40.699055581000039],[-73.950002802999961,40.699347970000076],[-73.950066487999948,40.699668677000034],[-73.950092344999973,40.699798891000057],[-73.951012519999949,40.699686284000052],[-73.951374184999963,40.699642023000081],[-73.951538787999937,40.699621877000027],[-73.951773977999949,40.699593093000033],[-73.951953020999952,40.699571180000078],[-73.95216223999995,40.69954557300008],[-73.952549399999953,40.699503075000052],[-73.953371406999963,40.699412839000047],[-73.953354035999951,40.699327074000053],[-73.953294678999953,40.699034016000041],[-73.953238089999957,40.698754614000052],[-73.953207885999973,40.69860548500003],[-73.953181894999943,40.698477161000028],[-73.953138876999958,40.698264762000065],[-73.953100050999979,40.698073062000049],[-73.952993062999951,40.697544809000078],[-73.952970220999987,40.697432024000079],[-73.952925790999984,40.697212643000057],[-73.952779476999979,40.696473310000044],[-73.95274769699995,40.696312720000037],[-73.952724331999946,40.696194655000056],[-73.952700033999974,40.696071869000036],[-73.952654241999937,40.695840482000051],[-73.952598287999933,40.695557732000054],[-73.952490307999938,40.695012069000029],[-73.952342189999968,40.694271344000072],[-73.952194958999939,40.693534340000042],[-73.952173857999981,40.69342720700007],[-73.953099557999963,40.69331623000005],[-73.953990785999963,40.693213570000069],[-73.95488181099995,40.693109833000051],[-73.955828027999985,40.693000680000068],[-73.956774702999951,40.69289223100003],[-73.957682353999985,40.692787037000073],[-73.958995013999981,40.692636127000071],[-73.958579848999989,40.690553990000069],[-73.958868536999944,40.690520544000037],[-73.958994704999952,40.690505925000025],[-73.959282737999956,40.690472553000063],[-73.959350024999935,40.690464757000029],[-73.959429314999966,40.69045557100003],[-73.959577319999937,40.690438284000038],[-73.960084768999934,40.690379012000051],[-73.960139008999988,40.690372677000028],[-73.960294217999945,40.690354546000037],[-73.960238803999971,40.690070519000074],[-73.960224445999984,40.68999692400007],[-73.96022131899997,40.68998090000008],[-73.960693394999964,40.689926421000052],[-73.960664487999964,40.689780275000032],[-73.960985401999949,40.689743497000052],[-73.960831865999978,40.688967241000057],[-73.960781150999935,40.688800062000041],[-73.960006598999939,40.688889329000062],[-73.959860795999987,40.688155747000053],[-73.959715148999976,40.68742393000008],[-73.959569102999978,40.686690851000037],[-73.959423992999973,40.685958601000038],[-73.959277387999975,40.685225001000049],[-73.959133467999948,40.684493444000054],[-73.958984679999958,40.683758210000065],[-73.958842020999953,40.683026348000055],[-73.958587066999939,40.681750777000047],[-73.958397115999958,40.680806086000075],[-73.958247103999952,40.679993399000068],[-73.958270702999982,40.679915189000042],[-73.958293567999988,40.679839428000037],[-73.958315286999948,40.679777697000077],[-73.958569128999955,40.679056115000037],[-73.958846020999943,40.678289643000028],[-73.959124799999984,40.677521936000062],[-73.959155022999937,40.677435894000041],[-73.959434026999986,40.676641567000047],[-73.959759471999973,40.675764301000072],[-73.960075683999946,40.674886363000041],[-73.960394418999954,40.674006895000048],[-73.958104759999969,40.673512269000071],[-73.957021794999946,40.67330219300004],[-73.954317868999965,40.672761726000033],[-73.953020697999989,40.67268935900006],[-73.950252529999943,40.67253816200008],[-73.947481901999936,40.672387940000078],[-73.944711795999979,40.672236706000035],[-73.94462948499995,40.67312804200003],[-73.944545493999954,40.674013478000063],[-73.944463227999961,40.674915043000055],[-73.944377670999984,40.675802199000032],[-73.944304716999966,40.676581019000025],[-73.944231607999939,40.677359514000045],[-73.944157468999947,40.678081800000029],[-73.94415259699997,40.678164652000078],[-73.944142758999988,40.678245254000046],[-73.944049385999961,40.679344404000062],[-73.943974872999945,40.680096423000066],[-73.943263163999973,40.680058901000052],[-73.943314536999935,40.680322021000052],[-73.943449128999987,40.681055152000056],[-73.943602429999942,40.681782690000034],[-73.943746005999969,40.682515878000061],[-73.943892543999937,40.683247779000055],[-73.943961153999965,40.68359343000003],[-73.944038042999978,40.683980778000034],[-73.94418464599994,40.684713850000037],[-73.944329654999933,40.685446596000077],[-73.944476677999944,40.686179767000056],[-73.944622674999948,40.68691265800004],[-73.944714370999975,40.687381638000033],[-73.944728238999971,40.687452565000058],[-73.944765953999934,40.687645458000077],[-73.944896368999935,40.688295150000044],[-73.944913104999955,40.688378519000025],[-73.942078243999958,40.688705499000037],[-73.939243887999964,40.689031850000049],[-73.936321695999936,40.689362300000028],[-73.935882707999951,40.689413242000057],[-73.934328406999953,40.689593611000078],[-73.933393998999975,40.689702028000056],[-73.932488694999961,40.689806257000043],[-73.930471056999977,40.690038532000074],[-73.92754838899998,40.690377421000051],[-73.92456281699998,40.690722163000032],[-73.924393222999981,40.690840047000052],[-73.924293521999971,40.69078165500008],[-73.923645187999966,40.690407135000044],[-73.923171055999944,40.690131704000066],[-73.922808412999984,40.689932223000028],[-73.921411617999979,40.691361013000062],[-73.920302029999959,40.692492853000033],[-73.918512816999964,40.694312006000075],[-73.917495850999956,40.695356555000046],[-73.917463613999985,40.69538966600004],[-73.91707301799994,40.695790845000033],[-73.916993205999972,40.69587144500008],[-73.91684666499998,40.696019430000035],[-73.916790052999943,40.696076601000073],[-73.916715290999946,40.696152099000074],[-73.916660336999939,40.696207594000043],[-73.916597121999985,40.696271431000071],[-73.916411320999941,40.696459061000041],[-73.916367358999935,40.696503455000027],[-73.916332416999978,40.696538740000051],[-73.916298498999936,40.696572992000029],[-73.91626679999996,40.696605002000069],[-73.91623094299996,40.696641213000078],[-73.91618561699994,40.696686984000053],[-73.916138088999958,40.696734979000041],[-73.916097226999966,40.696776244000034],[-73.916018820999966,40.696855420000077],[-73.915970172999948,40.696904545000052],[-73.915683608999984,40.697193924000032],[-73.915617441999984,40.697260739000058],[-73.914062251999951,40.698846500000059],[-73.91360709199995,40.699308923000046],[-73.912569713999972,40.700366648000056],[-73.913329319999946,40.700785744000029],[-73.914089181999941,40.701206042000081],[-73.914851112999941,40.701625527000033],[-73.91560138799997,40.702054301000032]]]]},"properties":{"OBJECTID":1,"OBJECTID_1":62,"Label":"Brooklyn: Bed Stuy and Bushwick Zone","NRRType":"RMZ Zone","Shape_Length":0.1698510006675418,"Shape_Area":0.00074240856022488922}},{"type":"Feature","id":2,"geometry":{"type":"Polygon","coordinates":[[[-73.88379509799995,40.864179905000071],[-73.88379525199997,40.864180157000078],[-73.883869307999987,40.864299222000056],[-73.883925345999955,40.864426095000056],[-73.883961410999973,40.864558052000064],[-73.883976537999956,40.864692331000072],[-73.883970610999938,40.864826074000064],[-73.883944417999942,40.864956520000078],[-73.88399974899994,40.864977873000043],[-73.885187413999972,40.865436148000072],[-73.883091417999935,40.866599843000074],[-73.883626567999954,40.867265921000069],[-73.884430000999942,40.866808712000079],[-73.885140464999949,40.866391207000049],[-73.88593842299997,40.865932731000044],[-73.886834558999965,40.865398326000047],[-73.888124176999952,40.864262903000053],[-73.889454158999968,40.863099896000051],[-73.890107075999936,40.862623746000054],[-73.890655319999951,40.862963166000043],[-73.891792018999979,40.863658417000067],[-73.892441420999944,40.864049477000037],[-73.892132645999936,40.864641955000025],[-73.892761532999941,40.865029194000044],[-73.893233312999939,40.865281210000035],[-73.893467771999951,40.865390737000041],[-73.893625406999945,40.865334872000062],[-73.893717375999984,40.865301432000081],[-73.893823015999942,40.865255703000059],[-73.893987596999978,40.865009228000076],[-73.89432450299995,40.864299068000037],[-73.894592708999937,40.86397204900004],[-73.895605452999973,40.864161667000076],[-73.895629876999976,40.864169708000077],[-73.895794472999967,40.864223899000081],[-73.895963204999987,40.864298630000064],[-73.896833017999938,40.864683908000075],[-73.897496604999958,40.86367774200005],[-73.898040782999942,40.862840016000064],[-73.899199100999965,40.863337312000056],[-73.900277264999943,40.863795968000034],[-73.899643007999941,40.864608062000059],[-73.89887422299995,40.865592364000065],[-73.899802932999989,40.86600707000008],[-73.901183902999946,40.864191252000069],[-73.902294371999972,40.862725930000067],[-73.902550427999984,40.862710271000026],[-73.902807912999947,40.862707984000053],[-73.903064987999983,40.86271914200006],[-73.903319846999977,40.862743615000056],[-73.903893633999985,40.862748694000061],[-73.904048370999988,40.862750063000078],[-73.904259003999982,40.862751926000044],[-73.904935252999962,40.862757911000074],[-73.903993863999972,40.864256455000032],[-73.904167881999967,40.864264849000051],[-73.904344568999988,40.864257089000034],[-73.904435673999956,40.864244472000053],[-73.90469017199996,40.864192332000073],[-73.904851329999985,40.864136797000072],[-73.905128462999983,40.863995224000064],[-73.905241220999983,40.863931320000063],[-73.905492244999948,40.86380465600007],[-73.905681051999977,40.863720303000036],[-73.906019970999978,40.863583413000072],[-73.906294264999985,40.863489787000049],[-73.906509606999975,40.863421471000038],[-73.906750045999956,40.863413327000046],[-73.906972547999942,40.863466814000049],[-73.907106314999965,40.863512406000041],[-73.907247773999984,40.863544982000064],[-73.907540074999986,40.863567919000047],[-73.907840435999958,40.863539497000033],[-73.90811563699998,40.86348729000008],[-73.908363943999973,40.86341563600007],[-73.908839787999966,40.86318921700007],[-73.90905381999994,40.863041345000056],[-73.909040900999969,40.86268721700003],[-73.908555325999941,40.86278588700003],[-73.908305595999934,40.862815567000041],[-73.907970069999976,40.862832549000075],[-73.907551180999974,40.862823304000074],[-73.906160346999968,40.862787316000038],[-73.908610198999952,40.860048688000063],[-73.910209576999989,40.858297120000032],[-73.909804093999981,40.857615879000036],[-73.909763057999953,40.857190944000081],[-73.909763070999986,40.857190897000066],[-73.909888061999936,40.856637120000073],[-73.910413618999939,40.855736696000065],[-73.91059009099996,40.85550094000007],[-73.91077986099998,40.855270921000056],[-73.910831716999951,40.855213663000029],[-73.910874890999935,40.855165997000029],[-73.910982428999944,40.855047279000075],[-73.911127740999973,40.854900692000058],[-73.911197201999983,40.854830625000034],[-73.910905127999968,40.854738875000066],[-73.910423594999941,40.854587609000077],[-73.910074147999978,40.854477834000079],[-73.909971270999961,40.85435975200005],[-73.909971116999941,40.854359572000078],[-73.909970950999934,40.854359410000029],[-73.909853916999964,40.854248144000053],[-73.909853869999949,40.854248098000028],[-73.909853821999945,40.854248062000067],[-73.909723885999938,40.854144999000027],[-73.90972368499996,40.854144845000064],[-73.909723459999952,40.85414469300008],[-73.909582326999953,40.854051219000041],[-73.909582101999945,40.854051065000078],[-73.909581852999963,40.854050930000028],[-73.90943096999996,40.853967769000064],[-73.909289525999952,40.853912223000066],[-73.90913902799997,40.853868332000047],[-73.908982109999954,40.853837258000055],[-73.908982050999953,40.853837249000037],[-73.908821744999955,40.853819689000034],[-73.908821495999973,40.853819662000035],[-73.908821246999935,40.853819652000027],[-73.908660353999949,40.853815798000028],[-73.908501612999942,40.853825334000078],[-73.910176225999976,40.851990881000063],[-73.910778127999947,40.851947088000031],[-73.910980430999984,40.851905245000069],[-73.910980537999933,40.851905219000059],[-73.910980644999938,40.851905191000071],[-73.911177811999949,40.85184578500008],[-73.911178013999972,40.851845722000064],[-73.911178215999939,40.851845641000068],[-73.911366439999938,40.85176928900006],[-73.911366605999945,40.851769227000034],[-73.911366759999964,40.851769146000038],[-73.911428127999955,40.85173700100006],[-73.911542409999981,40.851677142000028],[-73.911542611999948,40.851677034000033],[-73.911542789999942,40.851676917000077],[-73.911702648999949,40.851571159000059],[-73.911702791999971,40.851571061000072],[-73.911702933999948,40.851570944000059],[-73.911844592999955,40.851453673000037],[-73.911955501999955,40.851335505000065],[-73.912049594999985,40.851207698000053],[-73.912124852999966,40.851072412000065],[-73.91217992199995,40.85093209300004],[-73.91221416999997,40.850789337000037],[-73.912158040999941,40.850789034000059],[-73.912157602999969,40.850789034000059],[-73.912157234999938,40.850788935000026],[-73.91209448799998,40.85077220900007],[-73.912094273999969,40.850772155000072],[-73.912094155999966,40.85077207300003],[-73.912037755999961,40.85073460600006],[-73.912037447999978,40.850734408000051],[-73.912037258999987,40.850734110000076],[-73.912004147999937,40.850680551000039],[-73.912003958999946,40.850680253000064],[-73.912003947999949,40.85067994800005],[-73.912001994999969,40.850623081000037],[-73.912001994999969,40.850622936000036],[-73.912002089999987,40.850622748000035],[-73.912025206999942,40.850575425000045],[-73.912025336999989,40.850575164000077],[-73.912025598999946,40.850574921000032],[-73.912061158999961,40.850541909000071],[-73.91210674499996,40.850506573000075],[-73.912106980999965,40.850506394000035],[-73.912107136999964,40.850506186000075],[-73.912143157999935,40.850456723000036],[-73.912143276999984,40.850456570000063],[-73.912143312999945,40.85045643400008],[-73.912159889999941,40.850394980000033],[-73.912159925999958,40.850394827000059],[-73.912159889999941,40.85039464700003],[-73.912148912999953,40.850329073000069],[-73.912148865999939,40.850328768000054],[-73.912148687999945,40.850328496000031],[-73.912109726999972,40.850269332000039],[-73.912109643999941,40.850269214000036],[-73.912109536999935,40.85026913300004],[-73.912050739999984,40.850225064000028],[-73.912050573999977,40.850224937000064],[-73.912050312999952,40.850224830000059],[-73.911984162999943,40.850198980000073],[-73.911983901999974,40.85019888100004],[-73.911983605999978,40.850198836000061],[-73.911919805999958,40.850188728000035],[-73.911617953999951,40.850141266000037],[-73.912126862999969,40.849649455000076],[-73.912979787999973,40.848440812000035],[-73.913948642999969,40.84708596400003],[-73.91438904599994,40.846462133000045],[-73.915242408999973,40.846810661000063],[-73.915267852999989,40.846821052000053],[-73.915758357999948,40.846700265000038],[-73.916860621999945,40.846464410000067],[-73.917534218999947,40.846335078000038],[-73.918179671999951,40.846248261000028],[-73.919183794999981,40.846106395000049],[-73.919306912999957,40.845319044000064],[-73.918337878999978,40.845315923000044],[-73.918371830999945,40.845125774000053],[-73.918388455999946,40.845062468000037],[-73.918773188999978,40.84504279500004],[-73.919350221999935,40.845000754000068],[-73.919351302999985,40.844953831000055],[-73.919350441999939,40.844871382000065],[-73.919448074999934,40.844610393000039],[-73.920036895999942,40.843669427000066],[-73.920914782999944,40.842442075000065],[-73.921892473999947,40.84112598400003],[-73.921946545999958,40.841053199000044],[-73.92243704599997,40.841825568000047],[-73.922820141999978,40.842759483000066],[-73.922893521999981,40.842958315000033],[-73.922947345999944,40.84316192600005],[-73.92298090099996,40.843368630000043],[-73.922993810999969,40.843576671000051],[-73.922986052999988,40.843784257000038],[-73.922957947999976,40.843989649000036],[-73.923052837999933,40.844058086000075],[-73.923067269999933,40.84406849700008],[-73.92319230399994,40.844135676000064],[-73.923329555999942,40.844188662000079],[-73.923474700999975,40.844225795000057],[-73.923623006999946,40.844246416000033],[-73.92381706599997,40.842894698000066],[-73.924137653999935,40.842474100000061],[-73.924850009999943,40.841503770000031],[-73.925096045999965,40.84119210800003],[-73.925269037999954,40.840184198000031],[-73.925961595999979,40.840133551000065],[-73.926460980999934,40.840187810000032],[-73.925487745999988,40.841779123000038],[-73.926231883999947,40.842107597000052],[-73.925828816999967,40.842561466000063],[-73.924916873999962,40.84329051800006],[-73.925434352999957,40.84369325800003],[-73.925582400999986,40.843804789000046],[-73.927471485999945,40.842084195000041],[-73.927681648999965,40.84210549800008],[-73.928039923999961,40.841269452000063],[-73.928207863999944,40.840990052000052],[-73.928354644999956,40.840703040000051],[-73.92847941399998,40.84040980900005],[-73.928581562999966,40.840111835000073],[-73.928660688999969,40.839810641000042],[-73.929850924999982,40.838233040000034],[-73.929991035999933,40.837861266000061],[-73.93007666699998,40.837634016000038],[-73.930114393999986,40.837533922000034],[-73.930191493999985,40.837311790000058],[-73.930247840999982,40.837149455000031],[-73.930358546999969,40.83683052300006],[-73.930488161999961,40.836422497000058],[-73.930574759999956,40.836149852000062],[-73.930583195999986,40.836123302000033],[-73.930670107999958,40.835822058000076],[-73.930788206999978,40.835412728000051],[-73.930799683999965,40.835368556000049],[-73.930909162999967,40.834946884000033],[-73.930973455999947,40.834699278000073],[-73.93115800399994,40.834732218000056],[-73.931214004999958,40.834738247000075],[-73.931594337999968,40.833383854000033],[-73.93171326199996,40.832957793000048],[-73.931848264999985,40.832472479000046],[-73.932101940999985,40.831577150000044],[-73.932166397999936,40.831020691000049],[-73.932172596999976,40.83076791600007],[-73.93216401799998,40.830640928000037],[-73.93215037799996,40.83051419800006],[-73.932131685999934,40.830387839000025],[-73.932107960999986,40.830261969000048],[-73.932079223999949,40.830136702000061],[-73.932045501999937,40.830012155000077],[-73.931825438999965,40.829463784000041],[-73.931770544999949,40.829354487000046],[-73.931639735999966,40.829134913000075],[-73.931440942999984,40.828783944000065],[-73.931349547999957,40.828628329000026],[-73.931269499999985,40.828469011000038],[-73.931248303999951,40.828418657000043],[-73.931201180999949,40.828306711000039],[-73.931181134999974,40.82822281600005],[-73.931041817999983,40.827639798000064],[-73.931019402999937,40.827399029000048],[-73.931013202999964,40.827157548000059],[-73.931023220999975,40.826916293000068],[-73.930959434999977,40.826970320000044],[-73.930687015999979,40.82706892300007],[-73.930604500999948,40.827029604000074],[-73.930241226999954,40.826878947000068],[-73.929857453999944,40.826722055000062],[-73.929753148999964,40.826593825000032],[-73.929594712999972,40.826339124000071],[-73.928718842999956,40.824931046000074],[-73.928537709999944,40.82465254300007],[-73.928474583999957,40.824557250000055],[-73.928142059999971,40.824069480000048],[-73.927489849999972,40.823180777000061],[-73.926916706999975,40.822465691000048],[-73.927225491999934,40.821717358000058],[-73.927480619999983,40.82111965200005],[-73.928025437999963,40.819796552000071],[-73.927303309999957,40.819603086000029],[-73.92695675899995,40.819508792000079],[-73.926879214999985,40.819487195000079],[-73.927317929999958,40.818567957000027],[-73.927248025999972,40.818551308000053],[-73.926359988999934,40.818329014000028],[-73.925822104999952,40.818188659000043],[-73.925386782999965,40.818073737000077],[-73.925186261999954,40.818020991000026],[-73.924548657999935,40.818720945000052],[-73.924026969999943,40.819293653000045],[-73.922654008999984,40.82050263800005],[-73.92194903799998,40.821039868000071],[-73.921145486999933,40.821571325000036],[-73.920666788999938,40.821845216000042],[-73.920544865999943,40.821942180000065],[-73.92048742999998,40.821987860000036],[-73.920403033999946,40.82206954000003],[-73.919633742999963,40.821868389000031],[-73.919292395999946,40.821778610000081],[-73.919170559999941,40.821746565000069],[-73.919108831999949,40.821730329000047],[-73.918605673999934,40.821597988000065],[-73.918557389999989,40.821585289000041],[-73.918442094999989,40.82155496300004],[-73.918149258999961,40.821477941000069],[-73.918055615999947,40.821453309000049],[-73.917948236999962,40.821425065000028],[-73.917787077999947,40.821382675000052],[-73.917417952999983,40.821285587000034],[-73.916570443999944,40.82283667400003],[-73.918337598999983,40.823393044000056],[-73.917884116999971,40.823687100000029],[-73.917822911999963,40.823726695000062],[-73.917567389999988,40.823891996000043],[-73.917469122999989,40.823954430000072],[-73.917405985999949,40.823994546000051],[-73.917319219999968,40.824049674000037],[-73.917251498999974,40.824092701000041],[-73.917191469999977,40.824130841000056],[-73.917128332999937,40.824170954000067],[-73.916893352999978,40.824320250000028],[-73.916775400999938,40.824395411000069],[-73.916089223999961,40.824846176000051],[-73.915516633999971,40.824715384000058],[-73.914752604999933,40.825208798000062],[-73.913946032999945,40.825728757000036],[-73.913168138999936,40.825464779000072],[-73.912892274999933,40.826015396000059],[-73.912177311999983,40.827435548000039],[-73.91209786099995,40.827687185000059],[-73.912033662999988,40.827869028000066],[-73.911865698999975,40.827818337000053],[-73.911674235999953,40.828157472000044],[-73.911670337999965,40.827973369000063],[-73.911695695999981,40.827767041000072],[-73.910309096999981,40.828780811000058],[-73.90948317699997,40.82960044400005],[-73.908961295999973,40.830234559000075],[-73.909146050999937,40.830294056000071],[-73.909715130999984,40.830478339000081],[-73.908750945999941,40.832015752000075],[-73.908519755999976,40.831939169000066],[-73.908217945999979,40.831839192000075],[-73.908025259999988,40.831776661000049],[-73.906839145999982,40.831392541000071],[-73.906262456999968,40.832436377000079],[-73.906093750999958,40.832741737000049],[-73.905915928999946,40.833063596000045],[-73.905724151999948,40.832986364000078],[-73.905623607999985,40.832945874000075],[-73.905052701999978,40.832715954000037],[-73.904831200999979,40.833038759000033],[-73.904769542999986,40.833128614000032],[-73.904223144999946,40.833924894000063],[-73.904151098999989,40.834037331000047],[-73.903674338999963,40.834781372000066],[-73.903603114999953,40.834892522000075],[-73.903522482999961,40.835018357000081],[-73.903086439999981,40.835668376000058],[-73.903038777999939,40.835739424000053],[-73.902907348999975,40.835935345000053],[-73.901970744999971,40.837177100000076],[-73.901237839999965,40.836868888000026],[-73.901223100999971,40.836972556000035],[-73.901211864999937,40.836966568000037],[-73.900967316999981,40.837306304000037],[-73.900802079999949,40.837250643000061],[-73.900846029999968,40.837190037000028],[-73.900766218999934,40.837165200000072],[-73.900787631999947,40.837135323000041],[-73.900857489999964,40.837047407000057],[-73.900507910999977,40.836928380000074],[-73.900452662999953,40.837023997000074],[-73.900401915999964,40.837117053000043],[-73.900328628999944,40.83724083900006],[-73.900319608999951,40.837256206000063],[-73.90025534199998,40.83736633500007],[-73.900182046999987,40.837495245000071],[-73.900174152999966,40.837509759000056],[-73.900138067999933,40.837574643000039],[-73.900163916999986,40.83758662300005],[-73.900218983999935,40.837612294000053],[-73.900277424999956,40.837639677000027],[-73.900336986999946,40.837667915000054],[-73.900394301999938,40.837695297000039],[-73.900444875999938,40.837718403000054],[-73.900445998999942,40.83771925800005],[-73.900501066999936,40.837745784000049],[-73.900560628999983,40.83777402100003],[-73.900595468999938,40.837790279000046],[-73.90067301199997,40.837827928000024],[-73.900711222999973,40.837845898000069],[-73.900826980999966,40.837898100000075],[-73.900874309999949,40.837834934000057],[-73.900884449999978,40.837822132000042],[-73.900972342999978,40.837706898000079],[-73.901282537999975,40.837842972000033],[-73.901449982999964,40.83791571200004],[-73.901472903999945,40.837889664000045],[-73.902012578999972,40.837194692000025],[-73.902881178999962,40.837493097000049],[-73.902937770999984,40.837512538000055],[-73.903340209999953,40.837650792000034],[-73.904509923999967,40.838025597000069],[-73.903817104999973,40.839276942000026],[-73.904003491999958,40.839337071000045],[-73.90454634699995,40.839506292000067],[-73.905384972999968,40.839777311000034],[-73.904867047999971,40.840705159000038],[-73.904746968999973,40.840920268000048],[-73.904156211999975,40.841978579000056],[-73.903576946999976,40.843012395000073],[-73.902917546999959,40.84418966000004],[-73.902785972999936,40.844424074000074],[-73.902714307999986,40.844551118000027],[-73.902689492999968,40.844589801000041],[-73.902664914999946,40.844636902000047],[-73.902468136999971,40.844981030000042],[-73.902098309999985,40.845650208000052],[-73.901414423999938,40.846871522000072],[-73.901024296999935,40.847676805000049],[-73.900882249999938,40.847831882000037],[-73.900756719999947,40.847996078000051],[-73.900649132999945,40.848167799000066],[-73.900560569999982,40.848345345000041],[-73.900491718999945,40.848526871000047],[-73.900098351999986,40.849217370000076],[-73.898514213999988,40.848706183000047],[-73.897762182999941,40.850028982000026],[-73.896597742999973,40.849650872000041],[-73.895754092999937,40.849380964000034],[-73.894947668999976,40.849113182000053],[-73.895578948999969,40.84786297200003],[-73.894732656999963,40.847571469000059],[-73.893877262999979,40.847273262000044],[-73.894337381999947,40.846495010000069],[-73.89409440299994,40.846496552000076],[-73.893851249999955,40.846482722000076],[-73.893610453999941,40.846453586000052],[-73.89337448699996,40.846409523000034],[-73.892902411999955,40.846276659000068],[-73.892238986999985,40.845973701000048],[-73.891877954999984,40.846585671000071],[-73.891335405999939,40.847477909000077],[-73.890867619999938,40.847249958000077],[-73.889966262999963,40.846800701000063],[-73.888922504999982,40.846290751000026],[-73.887837844999979,40.845750739000039],[-73.887342248999971,40.846336981000036],[-73.886993070999949,40.846744998000077],[-73.886865943999965,40.846709941000029],[-73.885967350999977,40.846288939000033],[-73.885955680999984,40.846283472000039],[-73.885878821999938,40.846230455000068],[-73.885604556999965,40.846551891000047],[-73.884925481999971,40.847348244000045],[-73.883778942999982,40.848690513000065],[-73.883230162999951,40.848354208000046],[-73.883121211999935,40.848229422000031],[-73.882884077999961,40.849082376000069],[-73.882850700999938,40.849200857000028],[-73.882558838999955,40.85023258800004],[-73.882323951999979,40.851069122000069],[-73.882004375999941,40.852197689000036],[-73.881668986999955,40.853356531000031],[-73.881034974999977,40.855608284000027],[-73.880731812999954,40.856684937000068],[-73.880730926999945,40.856815607000044],[-73.880772707999938,40.85704809300006],[-73.880792938999946,40.857135840000069],[-73.880809486999965,40.85720678000007],[-73.880883636999954,40.857517877000078],[-73.880943234999961,40.857702827000026],[-73.880943317999936,40.85770307100006],[-73.880943376999937,40.857703323000067],[-73.88098432399994,40.857892324000034],[-73.881006028999934,40.858083990000068],[-73.881008175999966,40.858276354000054],[-73.880990813999972,40.858467691000044],[-73.880967247999934,40.858553537000034],[-73.880760099999975,40.85950275700003],[-73.880610353999941,40.860365426000044],[-73.880618653999989,40.860505343000057],[-73.880645088999984,40.860645650000038],[-73.880689780999944,40.860784326000044],[-73.880752375999975,40.86091932000005],[-73.880831944999954,40.861048677000042],[-73.880927111999938,40.861170621000042],[-73.881036076999976,40.861283627000034],[-73.882009327999981,40.862055185000031],[-73.88379509799995,40.864179905000071]]]},"properties":{"OBJECTID":2,"OBJECTID_1":63,"Label":"Bronx: Grand Concourse Zone","NRRType":"RMZ Zone","Shape_Length":0.23567741528327665,"Shape_Area":0.0010085330994299014}},{"type":"Feature","id":3,"geometry":{"type":"MultiPolygon","coordinates":[[[[-73.985904141999981,40.710658704000025],[-73.985936649999985,40.710862850000069],[-73.985963551999987,40.711039663000065],[-73.985953449999954,40.711043078000046],[-73.985981478999975,40.711199392000026],[-73.986220574999948,40.711175504000039],[-73.986551716999941,40.71114308500006],[-73.986549474999947,40.711131127000044],[-73.986492295999938,40.710789460000058],[-73.986460905999934,40.71059727200003],[-73.985904141999981,40.710658704000025]]],[[[-73.982470172999967,40.731323188000033],[-73.982557703999987,40.73135843700004],[-73.982387697999968,40.731419548000076],[-73.982324236999943,40.73150619300003],[-73.981969231999983,40.731990864000068],[-73.982075842999961,40.732038617000057],[-73.983647391999966,40.73270701000007],[-73.984442067999964,40.733041559000071],[-73.985243415999946,40.733380680000039],[-73.986681221999959,40.733986500000071],[-73.988287415999935,40.734667307000052],[-73.989918313999965,40.735357646000068],[-73.989934803999972,40.73528377000008],[-73.989946944999986,40.735209409000049],[-73.989954710999939,40.735134711000057],[-73.98995808899997,40.735059822000039],[-73.989957071999982,40.734984893000046],[-73.989951660999964,40.734910074000027],[-73.989904373999934,40.734443094000028],[-73.989869934999945,40.733535418000031],[-73.990028289999941,40.732764588000066],[-73.990213322999978,40.732004638000035],[-73.990391513999953,40.731296827000051],[-73.991461124999944,40.731746462000046],[-73.991922110999951,40.731174601000077],[-73.992409049999935,40.730599515000051],[-73.991081110999971,40.730040925000026],[-73.990726716999973,40.729886990000068],[-73.990758697999979,40.729749134000031],[-73.990931948999958,40.729150599000036],[-73.991123979999941,40.72857626900003],[-73.991360104999956,40.727790773000038],[-73.991365298999938,40.727568087000066],[-73.991365318999954,40.72756804100004],[-73.991549746999965,40.727097775000061],[-73.991549763999956,40.727097728000047],[-73.991795213999978,40.726399763000074],[-73.99179522999998,40.72639971600006],[-73.992063087999952,40.725650747000032],[-73.992063104999943,40.725650701000063],[-73.992211130999976,40.725239594000072],[-73.992211146999978,40.725239548000047],[-73.992327841999952,40.72491653600008],[-73.992327857999953,40.724916489000066],[-73.992581294999979,40.724209858000052],[-73.992581310999981,40.724209812000026],[-73.992604642999936,40.724144753000076],[-73.992604659999984,40.72414470700005],[-73.992633963999936,40.724065168000038],[-73.992805041999986,40.723600841000064],[-73.993090006999978,40.722827399000039],[-73.993260567999982,40.722361612000043],[-73.993524394999952,40.721639994000043],[-73.993796687999975,40.720944744000064],[-73.994036406999953,40.720331312000042],[-73.99437887299996,40.719527390000053],[-73.994422591999978,40.719399600000031],[-73.994809203999978,40.71846572700008],[-73.995430172999988,40.717287543000054],[-73.996328615999971,40.717604464000033],[-73.99710964999997,40.717877917000067],[-73.997931913999935,40.718166992000079],[-73.998753923999971,40.718452662000061],[-73.999424719999979,40.718688575000044],[-73.999957624999979,40.718025395000041],[-74.000275851999959,40.717627702000073],[-74.000819841999942,40.716938008000056],[-74.001212286999987,40.716399895000052],[-74.001684477999959,40.715752423000026],[-74.001685265999981,40.715751354000076],[-74.002115972999945,40.715167215000065],[-74.001315100999989,40.714795743000025],[-74.001260577999972,40.714769106000062],[-74.00074793899995,40.714518653000027],[-74.00045608399995,40.714373366000075],[-74.000456071999963,40.714373304000048],[-74.000933164999935,40.713271554000073],[-74.000933190999945,40.713271510000027],[-74.000892559999954,40.713023356000065],[-74.000874210999939,40.71170522400007],[-74.000874177999947,40.711705227000039],[-74.000869230999967,40.711576458000025],[-74.000841039999955,40.711446955000042],[-74.000789428999951,40.711320407000073],[-74.000715511999942,40.711200432000055],[-74.000621665999972,40.711090283000033],[-74.000511275999941,40.710992568000052],[-74.00066508499998,40.710796101000028],[-74.000754308999944,40.710682130000066],[-74.000907751999989,40.710486130000049],[-74.00100466899994,40.710362329000077],[-74.001137882999956,40.710184263000031],[-74.000655485999971,40.709850170000038],[-74.000124597999957,40.709467898000071],[-73.999282767999944,40.708774102000064],[-73.998652626999956,40.708869518000029],[-73.998020738999969,40.708929473000069],[-73.996062755999958,40.709212867000076],[-73.996083887999987,40.709290330000044],[-73.996146885999963,40.70952122500006],[-73.996163058999969,40.709580494000079],[-73.996218067999962,40.709782104000055],[-73.996238906999963,40.709865334000028],[-73.996251893999954,40.709917203000032],[-73.996329529999969,40.71022726700005],[-73.99621244399998,40.710242958000038],[-73.995876047999957,40.710295302000077],[-73.995152599999983,40.710407879000059],[-73.994144355999936,40.710566959000062],[-73.992789809999977,40.710774675000039],[-73.992727665999951,40.710784304000072],[-73.99260383099994,40.710808440000051],[-73.992482836999955,40.710830116000068],[-73.992422765999947,40.71084460000003],[-73.992192999999986,40.710899994000044],[-73.992089651999947,40.710911711000051],[-73.991978161999953,40.71091956500004],[-73.991616977999968,40.710972609000066],[-73.991508262999957,40.710988574000055],[-73.989938992999953,40.711219024000059],[-73.989735309999958,40.71125118100008],[-73.989493451999977,40.711275095000076],[-73.988738643999966,40.711349721000033],[-73.98860534399995,40.711362898000061],[-73.988313338999944,40.711391768000055],[-73.987693755999942,40.711452218000034],[-73.987580461999983,40.71146327200006],[-73.987420859999986,40.711478843000066],[-73.986906958999953,40.711528978000047],[-73.986743916999956,40.711544882000055],[-73.986103544999935,40.711604808000061],[-73.986006152999948,40.711613922000026],[-73.984854219999988,40.711706441000047],[-73.984785471999942,40.711237089000065],[-73.98391507499997,40.711311632000047],[-73.98361603099994,40.711333940000031],[-73.983319105999954,40.711350135000032],[-73.983202999999946,40.711357811000028],[-73.983104677999961,40.711364819000039],[-73.983017167999947,40.711371055000029],[-73.982918518999952,40.711378087000071],[-73.982818102999943,40.711385243000052],[-73.982704850999937,40.711393316000056],[-73.982596287999968,40.711401053000031],[-73.982510797999964,40.711407145000067],[-73.982436016999941,40.711412475000031],[-73.982355865999978,40.71141818600006],[-73.98229925399994,40.711422221000078],[-73.982242180999947,40.71142628900003],[-73.982092116999979,40.711436983000056],[-73.981875581999986,40.711452415000053],[-73.981814200999963,40.711456789000067],[-73.98175942499995,40.71146069200006],[-73.981706258999964,40.711464482000054],[-73.981521334999968,40.711477658000035],[-73.981415537999965,40.711485197000059],[-73.981351906999976,40.711489732000075],[-73.981079048999959,40.71150917500006],[-73.980718013999933,40.71153490100005],[-73.980621803999952,40.711541759000056],[-73.980593193999937,40.711037931000078],[-73.980379182999968,40.710560522000037],[-73.980376477999982,40.710537484000042],[-73.980370908999987,40.710490027000048],[-73.980359134999958,40.710389823000071],[-73.980347366999979,40.710289619000037],[-73.980328739999948,40.710131012000033],[-73.98029865899997,40.709874877000061],[-73.980288907999977,40.709791838000058],[-73.978625277999981,40.710278814000048],[-73.97791129899997,40.710521657000072],[-73.976316564999934,40.711748883000041],[-73.97606310499998,40.712608436000039],[-73.976055738999946,40.712642214000027],[-73.97597275399994,40.712805253000056],[-73.975697510999964,40.713421894000078],[-73.975338017999945,40.714187990000028],[-73.975258253999982,40.714358804000028],[-73.97525488499997,40.714365637000071],[-73.975231290999943,40.714415173000077],[-73.975226799999973,40.714424568000027],[-73.975206575999948,40.714468124000064],[-73.975196464999954,40.714488623000079],[-73.97518073599997,40.714524491000077],[-73.975173996999956,40.714537303000043],[-73.975167254999974,40.714551823000079],[-73.975146976999952,40.714595509000048],[-73.975142539999979,40.714606484000058],[-73.97511945399998,40.714654396000071],[-73.974870664999969,40.715185538000071],[-73.974675168999966,40.71563563400008],[-73.974603259999981,40.715800469000044],[-73.974325713999974,40.716504228000076],[-73.974144679999938,40.717008426000064],[-73.973904286999982,40.71767688500006],[-73.973724472999947,40.718177376000028],[-73.973478339999986,40.718887119000044],[-73.973315258999946,40.719414417000053],[-73.973141085999941,40.720047833000081],[-73.972943162999968,40.72087631200003],[-73.97269687499994,40.721920882000063],[-73.972559669999953,40.722497400000066],[-73.972462950999955,40.72290395300007],[-73.972287780999977,40.723651721000067],[-73.972214406999967,40.723939124000026],[-73.972146921999979,40.724228665000055],[-73.972083934999944,40.724509666000074],[-73.972056928999962,40.724646323000059],[-73.97201193799998,40.724843621000048],[-73.971963563999964,40.725077645000056],[-73.971914054999957,40.725334733000068],[-73.971893799999975,40.725443206000079],[-73.971829257999957,40.725797171000067],[-73.971843931999956,40.725794265000047],[-73.972017570999981,40.725868107000053],[-73.972153835999961,40.726119587000028],[-73.972097862999988,40.726390820000063],[-73.972051559999954,40.726889250000056],[-73.973299375999943,40.727436311000076],[-73.97569791899997,40.728483356000027],[-73.975803845999963,40.728526783000063],[-73.976134308999974,40.728646576000074],[-73.97615344899998,40.72865351300004],[-73.976271378999968,40.728697562000036],[-73.976905771999952,40.728966127000035],[-73.97739527799996,40.729173351000043],[-73.978028387999984,40.729441363000035],[-73.979269901999942,40.729989732000035],[-73.98034148499994,40.730450764000068],[-73.980821418999938,40.730647463000025],[-73.981501944999934,40.730926381000074],[-73.982470172999967,40.731323188000033]]]]},"properties":{"OBJECTID":3,"OBJECTID_1":64,"Label":"Manhattan: East Village and Chinatown Zone","NRRType":"RMZ Zone","Shape_Length":0.1056210042898087,"Shape_Area":0.00045432405782593098}},{"type":"Feature","id":4,"geometry":{"type":"Polygon","coordinates":[[[-73.935157992999962,40.83269073200006],[-73.935166209999977,40.832861208000054],[-73.935168654999984,40.832883318000029],[-73.93514595299996,40.832893047000027],[-73.935133106999956,40.832911023000065],[-73.935122256999989,40.832912521000026],[-73.935125168999946,40.832953738000072],[-73.935119231999977,40.832975464000071],[-73.935121195999955,40.832991953000032],[-73.935113280999985,40.833011426000041],[-73.935117211999966,40.833030167000061],[-73.935123119999957,40.833036915000037],[-73.935126061999938,40.833059394000031],[-73.935128924999958,40.833150813000032],[-73.935140759999967,40.833159816000034],[-73.935133836999967,40.833171050000033],[-73.935117060999971,40.833184531000029],[-73.935124930999962,40.833198024000069],[-73.935122950999983,40.833210017000056],[-73.935131804999969,40.833236992000025],[-73.935138691999953,40.833249738000063],[-73.935139669999955,40.833268469000075],[-73.935125837999976,40.833289444000059],[-73.935130755999978,40.833302934000073],[-73.935127761999979,40.833334406000063],[-73.935133659999963,40.833353148000072],[-73.93512181899996,40.833362128000033],[-73.935118831999944,40.833385359000033],[-73.935113851999972,40.833434064000073],[-73.935105243999942,40.83366598200007],[-73.935098305999986,40.833692957000039],[-73.935098275999962,40.833723682000027],[-73.935084814999982,40.833873922000066],[-73.935070982999946,40.833895643000062],[-73.935077846999945,40.833932368000035],[-73.935043526999948,40.834219724000036],[-73.935032642999943,40.834257188000038],[-73.935037525999974,40.834306646000073],[-73.935032004999982,40.834400690000052],[-73.935006667999971,40.834542405000036],[-73.934924728999988,40.835000691000062],[-73.934453794999968,40.835989286000029],[-73.934747094999977,40.836100420000037],[-73.934800264999978,40.836118442000043],[-73.934964142999945,40.835768260000066],[-73.935309281999935,40.835486050000043],[-73.935727645999975,40.835164672000076],[-73.936605048999979,40.834521341000027],[-73.936821219999956,40.834349646000078],[-73.937316187999954,40.833950041000037],[-73.937553098999956,40.833782410000026],[-73.937973864999947,40.833451142000058],[-73.938083224999957,40.833365815000036],[-73.938189478999959,40.833278254000049],[-73.938292548999982,40.833188524000036],[-73.938392359999966,40.833096693000073],[-73.938488834999987,40.833002828000076],[-73.938581903999989,40.832907000000034],[-73.938775004999968,40.832671537000067],[-73.938950000999967,40.832425661000059],[-73.939229963999935,40.831916127000056],[-73.939298453999982,40.831783218000055],[-73.939373358999944,40.831652322000025],[-73.939454574999957,40.831523615000037],[-73.939541992999978,40.831397274000039],[-73.939635492999969,40.831273470000042],[-73.939734945999987,40.831152374000055],[-73.939789940999958,40.831088583000053],[-73.939840687999947,40.831022793000045],[-73.939887061999968,40.830955166000081],[-73.939928944999963,40.830885870000031],[-73.939966238999943,40.830815076000079],[-73.93999884699997,40.830742961000055],[-73.940066971999954,40.830511571000045],[-73.940142714999979,40.830380314000081],[-73.940347852999935,40.830466756000078],[-73.940583094999965,40.830565883000077],[-73.940777450999974,40.830647781000039],[-73.942349078999939,40.831310015000042],[-73.942981066999948,40.831576304000066],[-73.945720747999985,40.832729753000081],[-73.945825355999943,40.832773785000029],[-73.945925142999954,40.832814069000051],[-73.945926985999961,40.832814822000046],[-73.948227377999956,40.833857633000036],[-73.948906837999971,40.834073624000041],[-73.949195893999956,40.834218983000028],[-73.949417111999935,40.834366915000032],[-73.949575723999942,40.834427686000026],[-73.949709484999971,40.83445761400003],[-73.949777568999934,40.834464290000028],[-73.94985731099996,40.834467612000026],[-73.950156616999948,40.834405084000025],[-73.950245645999985,40.834275739000077],[-73.950424467999937,40.834055412000055],[-73.950665142999981,40.833644322000055],[-73.950937168999985,40.833302322000065],[-73.950967540999955,40.833225028000072],[-73.951060902999984,40.832905986000071],[-73.95109761599997,40.832813421000026],[-73.95119489199999,40.83265545900008],[-73.95131781799995,40.832458836000058],[-73.95140454999995,40.832330454000044],[-73.951599810999937,40.832055405000062],[-73.951700430999949,40.831924321000031],[-73.952151310999966,40.831283042000052],[-73.952194559999953,40.831233829000041],[-73.952535418999958,40.830749776000062],[-73.952977600999986,40.830098527000075],[-73.953592692999962,40.82910604500006],[-73.953955470999972,40.828593681000029],[-73.953987556999948,40.828551840000046],[-73.954022473999942,40.828511304000074],[-73.954034124999964,40.828498747000026],[-73.954062524999983,40.828470456000048],[-73.954137898999988,40.828401733000078],[-73.954170913999974,40.828369193000071],[-73.954217943999936,40.828315794000048],[-73.954273615999966,40.82824486700008],[-73.954362086999936,40.828126207000025],[-73.954466106999973,40.827982493000036],[-73.954543287999968,40.82786980000003],[-73.95469877499994,40.827926709000053],[-73.955040537999935,40.827421755000046],[-73.956319252999947,40.82795253900008],[-73.956950071999984,40.827008876000036],[-73.957274344999973,40.827103383000065],[-73.959535149999965,40.823661584000035],[-73.958144535999963,40.823029045000055],[-73.958218796999972,40.822913322000034],[-73.95794045699995,40.822782676000031],[-73.958076087999984,40.822619680000059],[-73.958132041999988,40.822539413000072],[-73.958169461999944,40.822466423000037],[-73.958201601999974,40.822291459000041],[-73.958528723999962,40.821852078000063],[-73.95864996499995,40.821919725000043],[-73.958886505999942,40.822465168000065],[-73.959050941999976,40.822549658000071],[-73.958927555999935,40.822720078000032],[-73.959604732999935,40.823003009000047],[-73.959911403999968,40.822579441000073],[-73.95940881699994,40.822369455000057],[-73.959231170999942,40.822295232000045],[-73.959114448999969,40.822463287000062],[-73.958983299999943,40.822400083000048],[-73.958746644999962,40.821813834000068],[-73.958932779999941,40.821590133000029],[-73.959078890999933,40.821659859000079],[-73.960367500999951,40.820128444000034],[-73.961684179999963,40.819370637000077],[-73.961522704999936,40.819214412000065],[-73.961438382999972,40.81926171200007],[-73.961247876999948,40.819051223000031],[-73.961568740999951,40.81869013000005],[-73.961887832999935,40.818823462000069],[-73.962103062999972,40.819085811000036],[-73.962399557999959,40.819245670000043],[-73.962402782999959,40.819247297000061],[-73.962406316999989,40.819248499000025],[-73.962410060999957,40.819249243000058],[-73.962413916999935,40.819249510000077],[-73.962417776999985,40.819249293000041],[-73.962421537999944,40.819248596000079],[-73.962425096999937,40.819247439000037],[-73.962428356999965,40.81924585400003],[-73.962431229999936,40.81924388200008],[-73.962433637999936,40.819241580000039],[-73.962433443999942,40.819241589000058],[-73.962433725999972,40.819241542000043],[-73.962481519999983,40.819188231000055],[-73.962481516999958,40.819188199000052],[-73.962482949999981,40.819185903000061],[-73.962483842999973,40.819183453000051],[-73.962484168999936,40.819180923000033],[-73.962483917999975,40.819178388000068],[-73.962483095999971,40.819175924000035],[-73.962481730999968,40.819173603000024],[-73.962479861999952,40.819171496000081],[-73.962477541999988,40.819169663000025],[-73.962474843999985,40.819168160000061],[-73.962131327999941,40.818961526000066],[-73.96253835899995,40.818714521000061],[-73.962454040999944,40.818632087000026],[-73.962138680999942,40.818826607000062],[-73.961640671999987,40.818608401000063],[-73.962157341999955,40.818029875000036],[-73.962111106999942,40.818010370000025],[-73.96382159999996,40.816177057000061],[-73.969077632999984,40.808473891000062],[-73.971109069999954,40.805798458000027],[-73.967063965999955,40.804315024000061],[-73.966809682999951,40.804209015000026],[-73.966709483999978,40.804167242000062],[-73.963862671999948,40.802980356000035],[-73.959648261999973,40.801164741000036],[-73.958174376999978,40.800590859000067],[-73.957866399999943,40.800523590000068],[-73.952434395999944,40.798236090000046],[-73.949243243999945,40.796913855000071],[-73.951112427999988,40.794293353000057],[-73.954777121999939,40.78915905000008],[-73.951594961999945,40.787826024000026],[-73.950364857999944,40.787342457000079],[-73.948391906999973,40.786434999000051],[-73.949281116999941,40.78521958500005],[-73.947075581999968,40.784238351000056],[-73.944653828999947,40.783160842000029],[-73.944271578999974,40.782990760000075],[-73.943581292999966,40.782830406000073],[-73.943571149999968,40.782849510000062],[-73.943510366999988,40.782982325000035],[-73.943375320999962,40.783175869000047],[-73.943335374999947,40.783233365000058],[-73.943188459999988,40.783407355000065],[-73.943110406999949,40.783470366000074],[-73.942927724999947,40.783591709000063],[-73.942549324999959,40.783843252000054],[-73.942411770999968,40.783925483000075],[-73.942383355999937,40.783942363000051],[-73.942178444999968,40.78404632400003],[-73.942078329999958,40.784100643000045],[-73.941988409999965,40.784149281000055],[-73.94160833799998,40.784337311000058],[-73.940441380999971,40.784924299000068],[-73.940197860999945,40.785055670000077],[-73.939833333999957,40.785252391000029],[-73.939782356999956,40.785298354000076],[-73.93950741499998,40.785611236000079],[-73.939408134999951,40.785732578000079],[-73.93932740799994,40.785831356000074],[-73.939136368999982,40.786051310000062],[-73.938920593999967,40.786303187000044],[-73.938557403999937,40.786727382000038],[-73.938500910999949,40.786785044000055],[-73.938429374999942,40.786858251000069],[-73.93821844699994,40.787098596000078],[-73.938107466999952,40.78722528600008],[-73.938066248999974,40.787284161000059],[-73.937957580999978,40.787466969000036],[-73.937818626999956,40.787696785000037],[-73.937758826999982,40.787826948000031],[-73.937692560999949,40.787973743000066],[-73.937636228999963,40.788102561000073],[-73.937551291999966,40.78829206000006],[-73.937404923999964,40.788617474000034],[-73.937374735999981,40.788686406000068],[-73.937307062999935,40.788841095000066],[-73.93705721699996,40.789157959000079],[-73.936224658999947,40.78880657600007],[-73.936119467999958,40.788950550000038],[-73.936945772999934,40.789299295000035],[-73.936935787999971,40.789311960000077],[-73.937042327999961,40.789360487000067],[-73.93669442199996,40.789921366000044],[-73.936321507999935,40.790434274000063],[-73.936025316999974,40.790837445000079],[-73.935832466999955,40.791103022000073],[-73.935504692999984,40.791299489000039],[-73.935191791999955,40.791479477000053],[-73.935267712999973,40.791535036000028],[-73.935113358999956,40.791647253000065],[-73.934440128999938,40.792111395000063],[-73.934161535999976,40.79230340600003],[-73.934071375999963,40.792366611000034],[-73.933889250999982,40.792497794000042],[-73.933729303999939,40.792609795000033],[-73.933486294999966,40.792782488000057],[-73.933259995999947,40.792915196000081],[-73.933108230999949,40.793003646000045],[-73.932878524999978,40.793138568000074],[-73.932673789999967,40.793256550000081],[-73.932525265999971,40.793332609000061],[-73.932352686999934,40.793422163000059],[-73.932045835999986,40.793594315000064],[-73.931981752999945,40.79363053000003],[-73.931372144999955,40.793958604000068],[-73.930904326999951,40.794210313000065],[-73.930483639999977,40.794434779000028],[-73.930244465999976,40.794562306000046],[-73.930232431999968,40.794571164000047],[-73.930191314999945,40.794601249000038],[-73.93017851899998,40.794622020000077],[-73.930089657999986,40.79471522800003],[-73.929917012999965,40.79494280800003],[-73.929840045999981,40.794999974000064],[-73.929747344999953,40.795217066000077],[-73.929531977999943,40.795516116000044],[-73.929309130999968,40.795818575000055],[-73.929288328999974,40.795885805000069],[-73.929284134999989,40.795899657000064],[-73.929127467999933,40.796435269000028],[-73.92902462099994,40.79682023600003],[-73.929035638999949,40.796820513000057],[-73.928972607999981,40.79826717900005],[-73.928945366999983,40.798919907000027],[-73.928920822999942,40.799466505000055],[-73.928902920999974,40.799863534000053],[-73.92895488399995,40.800317687000074],[-73.928987584999959,40.80061044200005],[-73.929009278999956,40.800780668000073],[-73.929017844999976,40.800839034000035],[-73.92903629999995,40.801089223000076],[-73.92920957399997,40.801155840000035],[-73.92927627499995,40.801381510000056],[-73.929303600999958,40.801504120000061],[-73.929332666999983,40.801607173000036],[-73.929355757999986,40.801679570000033],[-73.929437938999968,40.801870031000078],[-73.929455060999942,40.801915688000065],[-73.929521836999982,40.802061799000057],[-73.929578335999963,40.802188344000058],[-73.929693909999969,40.802448605000052],[-73.929720496999948,40.802510849000043],[-73.929788078999934,40.802669068000057],[-73.92982399999994,40.80272833500004],[-73.929999013999975,40.803260701000056],[-73.930014011999958,40.803295818000038],[-73.930061604999935,40.803369968000027],[-73.930184692999944,40.803582267000024],[-73.930193152999948,40.803591485000027],[-73.930263111999977,40.803714114000059],[-73.93028000399994,40.803742699000054],[-73.930310162999945,40.803794335000077],[-73.93033431899994,40.80382753300006],[-73.930354848999968,40.803856125000038],[-73.930406767999955,40.803928985000027],[-73.930444200999943,40.803982469000061],[-73.930543830999966,40.804115739000054],[-73.930574035999939,40.804151711000031],[-73.930574010999976,40.80416092400003],[-73.93061143999995,40.804215335000038],[-73.930633193999938,40.804238399000042],[-73.930640426999958,40.804254073000038],[-73.930688731999965,40.804318632000047],[-73.930697172999942,40.80433430800008],[-73.930711685999938,40.804349064000064],[-73.930717700999935,40.80436381700008],[-73.93080767899994,40.804482328000063],[-73.930829410999934,40.804518286000075],[-73.930910763999975,40.804627713000059],[-73.930935689999956,40.80466123900004],[-73.930959829999949,40.804695365000043],[-73.930976751999935,40.804713819000028],[-73.930977943999949,40.804723952000074],[-73.931029275999947,40.804790814000057],[-73.931035299999962,40.80480280200004],[-73.931075152999938,40.804855371000031],[-73.931099306999954,40.80488949800008],[-73.931115487999989,40.804912671000068],[-73.931128285999989,40.804930997000042],[-73.931160898999963,40.804975260000049],[-73.931270870999981,40.805098873000077],[-73.931306513999971,40.805139927000027],[-73.93139229999997,40.805241389000059],[-73.931410440999969,40.805255234000072],[-73.931433384999934,40.80529027800003],[-73.931450312999971,40.805305965000059],[-73.93146847099996,40.805314290000069],[-73.931476893999957,40.805336413000077],[-73.931497440999976,40.805359473000067],[-73.931545572999937,40.805406103000053],[-73.932391569999936,40.806307462000063],[-73.932632281999986,40.80656125400003],[-73.932934282999952,40.806879342000059],[-73.933086116999959,40.807035235000058],[-73.933175534999975,40.807153711000069],[-73.933185355999967,40.807164518000036],[-73.933260494999956,40.807245565000073],[-73.933329922999974,40.807327266000073],[-73.933562591999987,40.807608997000045],[-73.934122134999939,40.808664772000043],[-73.934136725999963,40.808744711000031],[-73.934197790999974,40.809040172000039],[-73.934215310999946,40.809067494000033],[-73.934340045999988,40.809570534000045],[-73.934342209999954,40.809935903000053],[-73.934315804999983,40.810330585000031],[-73.93430557399995,40.81048998600005],[-73.934289921999948,40.810734036000042],[-73.934215496999968,40.811279770000056],[-73.93419698699995,40.811401499000056],[-73.934138514999972,40.811720692000051],[-73.934094466999966,40.811976723000043],[-73.934039838999979,40.812349201000075],[-73.934009102999937,40.812616819000027],[-73.933983189999935,40.812822956000048],[-73.933931246999975,40.813356011000053],[-73.933866502999933,40.814161479000063],[-73.933865314999935,40.814201058000037],[-73.933863709999969,40.814257618000056],[-73.933857925999973,40.814489796000032],[-73.934016166999982,40.814492074000043],[-73.93399261999997,40.814536708000048],[-73.933967608999978,40.814573533000043],[-73.933977850999952,40.814609252000025],[-73.933986639999944,40.814638281000043],[-73.93398364799998,40.814690742000039],[-73.933982155999956,40.814713064000046],[-73.933996838999974,40.814727580000067],[-73.93399094199998,40.814746549000063],[-73.933979164999982,40.814766632000044],[-73.933992375999935,40.814783390000059],[-73.933974726999963,40.814795654000079],[-73.933983505999947,40.814833615000055],[-73.933976135999956,40.814857049000068],[-73.933984926999983,40.814882719000025],[-73.933983436999938,40.814903934000029],[-73.93399076999998,40.814920679000068],[-73.933987058999946,40.814955832000066],[-73.933970813999963,40.815047349000054],[-73.933964904999982,40.815077486000064],[-73.933969282999954,40.815108744000042],[-73.933964844999934,40.815137764000042],[-73.933948653999948,40.815163420000033],[-73.933950102999972,40.815183520000062],[-73.933945663999964,40.815213647000064],[-73.933955920999949,40.815243793000036],[-73.933954420999953,40.815275049000036],[-73.93394998499997,40.815302943000063],[-73.933949931999962,40.815356524000038],[-73.933957990999943,40.815380526000069],[-73.933947683999975,40.815398376000076],[-73.933950612999979,40.81540954500008],[-73.933940322999945,40.815424046000032],[-73.933947631999956,40.81545083900005],[-73.933935857999984,40.815479856000024],[-73.933954937999943,40.815494374000025],[-73.933953456999973,40.815505540000061],[-73.933943149999948,40.815524506000031],[-73.933943134999936,40.815540130000045],[-73.933950588999949,40.815549586000031],[-73.933950570999968,40.815567688000044],[-73.933944764999978,40.815595893000079],[-73.933830408999938,40.815593682000042],[-73.933791373999952,40.817159695000043],[-73.933794746999979,40.817784930000073],[-73.933801595999967,40.818358081000042],[-73.93382754199996,40.81936475200007],[-73.933829173999982,40.819423817000029],[-73.933831406999957,40.819499418000078],[-73.93383216899997,40.819604980000065],[-73.933831491999968,40.819728066000039],[-73.933973815999934,40.819737897000039],[-73.933988045999968,40.81997635700003],[-73.933984357999975,40.820008242000029],[-73.934002091999957,40.820346519000054],[-73.934005295999953,40.82040616300003],[-73.934028023999986,40.820825132000039],[-73.934037004999936,40.820960870000079],[-73.934047397999962,40.821142199000064],[-73.934045874999981,40.82118502700007],[-73.93407145599997,40.821567643000037],[-73.934078740999951,40.821702885000036],[-73.934075743999983,40.821725422000043],[-73.934080847999951,40.821813898000073],[-73.934092525999972,40.82200436100004],[-73.934099838999941,40.822112550000043],[-73.934103733999962,40.822209540000074],[-73.934118926999986,40.822532656000078],[-73.934122662999982,40.822655576000045],[-73.934135135999952,40.822808979000058],[-73.934147444999951,40.823028942000064],[-73.934147976999952,40.823037355000054],[-73.934167345999981,40.823086904000036],[-73.934219748999965,40.823807369000065],[-73.934247828999958,40.824175207000053],[-73.934274254999934,40.824447276000058],[-73.934295117999966,40.824504711000031],[-73.934296707999977,40.824657554000055],[-73.934357834999958,40.825829261000081],[-73.934368580999944,40.825835922000067],[-73.934484310999949,40.827045417000079],[-73.934425364999981,40.827051218000065],[-73.934517306999965,40.827737255000045],[-73.934540381999966,40.82791179600008],[-73.934523156999944,40.827916124000069],[-73.934533989999977,40.82797688200003],[-73.934547263999946,40.828056486000037],[-73.934559502999946,40.828125726000053],[-73.934562153999934,40.828142813000056],[-73.934604003999937,40.828690725000058],[-73.93461780399997,40.828701980000062],[-73.934637818999988,40.828915185000028],[-73.934656555999936,40.828921183000034],[-73.934657510999955,40.828951161000077],[-73.934666360999984,40.828981891000069],[-73.934664353999949,40.829022358000032],[-73.934663937999971,40.829032420000033],[-73.934669741999983,40.829247751000025],[-73.934677371999953,40.829321727000035],[-73.93469461799998,40.829337098000053],[-73.934706450999954,40.829349099000069],[-73.934714285999974,40.829409051000027],[-73.934695527999963,40.829424780000068],[-73.93470240399995,40.829448755000044],[-73.934716161999972,40.829503469000031],[-73.934726978999947,40.829535694000072],[-73.934724002999985,40.829558925000072],[-73.934738773999982,40.829582914000071],[-73.934750595999958,40.829605405000052],[-73.934740709999971,40.829617386000052],[-73.934745126999985,40.829645492000054],[-73.934764833999964,40.829665728000066],[-73.934760843999982,40.829708446000041],[-73.93478251199997,40.829748918000064],[-73.934794339999939,40.829764665000027],[-73.934791363999977,40.829776648000063],[-73.934802207999951,40.82978115800006],[-73.934800219999943,40.829800634000037],[-73.934832272999984,40.829816762000064],[-73.934894933999942,40.830294888000026],[-73.934936557999947,40.830610769000032],[-73.934986457999969,40.831035678000035],[-73.93502415599994,40.831328324000026],[-73.935069650999935,40.831712393000032],[-73.935089238999979,40.831867523000028],[-73.935097052999936,40.831950706000043],[-73.935079293999934,40.831949949000034],[-73.93511538499996,40.832374102000074],[-73.935130182999956,40.832371859000034],[-73.935157992999962,40.83269073200006]],[[-73.958890968999981,40.821570180000037],[-73.958794033999936,40.821556233000081],[-73.958814076999943,40.821533486000078],[-73.958890968999981,40.821570180000037]]]},"properties":{"OBJECTID":4,"OBJECTID_1":89,"Label":"Manhattan: Harlem Zone","NRRType":"RMZ Zone","Shape_Length":0.17905648211666747,"Shape_Area":0.0012161579583667257}}]}

// ===== CREATE MAP ================================================== //
var name;
var id;
var ratData = [];

var map = L.map('map').setView([40.7722226,-73.9638235],11); // [Lat,Long],Zoom
L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	subdomains: 'abcd',
	maxZoom: 15,
    minZoom: 11
}).addTo(map);

L.control.scale({
    metric: false,
    position: 'bottomleft'
}).addTo(map)

L.easyButton({
    position: "bottomleft",
    states: [{
        title: "Zoom to fit",
        icon: "fas fa-undo",
        
        onClick: function() {
            
            resetZoom();
        }
    }]
}).addTo(map);     

function resetZoom() {
    // console.log('reset zoom 3')
    window.location.hash = '#top'
    location.reload()
}

// When style is run in const geojson, it returns these - default styles
function style(feature) {
    return {
        weight: 1,
        opacity: 1,
        color: 'black',
        dashArray: '1',
        fillOpacity: 0.2,
        fillColor: 'black'
    };
}

       
// This actually calls our geojson, style, and onEachFeature
var geog = L.geoJson(rmz,{
    style,
    onEachFeature
}).addTo(map);

d3.csv("2022-rat-data.csv").then(data => {
    ratData = data;
    // console.log(ratData)
})

// And what to do on mouseover, mouseout, and click
function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        // mouseout: resetHighlight,
        click: zoomToFeature // Zooms on click.
    });
}

// HIGHLIGHT, SELECT, ZOOM, HOVER
function resetHighlight(e) {
    geog.resetStyle(e.target);
}

function zoomToFeature(e) {
  console.log('zoom to feature:'),
  console.log(e)
  console.log(rmz)
    geog.resetStyle()
    map.fitBounds(e.target.getBounds());
    id = e.target.feature.properties.OBJECTID
    console.log('Filtering data for: ')
    console.log('Name: ' + e.target.feature.properties.Label) 
    console.log('ID: ', id)
    redrawChart(id)
    name = e.target.feature.properties.Label
    printToPage(id);
    interpretInitial(id)
    interpretCompliance(id)
    // The above gets id and name, puts them into global variables, for other selection display

    // this sets style on click (but it won't stick)

    const layer = e.target;
    layer.setStyle({ // Styles for hover-highlight
        weight: 3,
        color: 'black',
        dashArray: '5',
        fillOpacity: 0.7
    });

    layer.bringToFront();

}

// Highlght feature
function highlightFeature(e) {
    geog.resetStyle()
    // console.log('highlight feature:')
    // console.log(e)
    const layer = e.target;
    layer.setStyle({ // Styles for hover-highlight
        weight: 3,
        color: 'black',
        dashArray: '5',
        fillOpacity: 0.7
    });

layer.bringToFront();

}

// ===== PRINT INFO TO PAGE ================================================== //
function printToPage(x) {
    // console.log("id: " + x)
    document.getElementById('zoneName').innerHTML = name;

    const zoneData = ratData.filter(zone => zone.ID == x)
}

// update map and page from dropdown
function update(x) {
  console.log('updated for: ', x)
  let zone = x - 1
  let layerzone = rmz.features[zone]

  var bounds = L.geoJSON(layerzone).getBounds()
  var center = bounds.getCenter()
  map.setView(center, 14)

  document.getElementById('zoneName').innerHTML = layerzone.properties.Label

  redrawChart(x)
  interpretInitial(x)
  interpretCompliance(x)
}

// ===== GET RECENT DATA (INITIAL, COMPLIANCE) ================================================== //
function interpretInitial(x) {
  // filter recent Initial Inspections data for this neighborhood
  thisRecent = recent.filter (y => y.zoneID == x)

  // get ARS fail number
  var ars = thisRecent.filter(y => y.Type === 'Active rat signs')
  var arsfail = ars[0].Number

  // get total inspections
  var entry = thisRecent.filter(y => y.Type === 'Initial inspections')
  var initial = entry[0].Number 

  // calculate percent
  var percent = 100 * arsfail / initial

  document.getElementById('failpercent').innerHTML = parseFloat(percent).toFixed(1)
  document.getElementById('interpret-1').classList.remove('hide')

}

function interpretCompliance(x) {
  thisCompliance = complianceRecent.filter(y => y.zoneID == x)
  console.log('recent data compliance:', thisCompliance)
  var comp = thisCompliance.filter(y => y.Type === 'Compliance inspections')
  var compI = comp[0].Number

  var ars = thisCompliance.filter(y => y.Type === 'Active rat signs')
  var arsfail = ars[0].Number

  var percent = 100 * arsfail / compI
  document.getElementById('failpercent2').innerHTML = parseFloat(percent).toFixed(1)
  document.getElementById('interpret-2').classList.remove('hide')

}


// ===== 311 COMPLAINTS SPEC ================================================== //
var specOne = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": "container",
    "height": "container",
    "title": {
      "text": "",
      "subtitlePadding": 10,
      "fontWeight": "normal",
      "anchor": "start",
      "fontSize": 13,
      "font": "sans-serif",
      "baseline": "top",
      "dy": -10,
      "subtitleFontSize": 13
    },
    "config": {
      "view": {"stroke": null},
      "axisX": {"labelAngle": 0, "grid": false, "tickCount": {"interval": "month", "step": 6}},
      "axisY": {"tickCount": 2}
    },
    "data": {
      "url": "311-complaints.csv"
    },
    "transform": [{"filter": "datum.zoneID=='2'"}],
    "encoding": {
      "x": {
        "field": "Date",
        "type": "temporal",
        "title": "",
        "axis": {
          "values": [1656561600000,1672462800000,1688097600000,1703998800000], // Add time intervals to specify ticks
          "format": "%b %Y"},
        "scale": {"domainMin": 1650841000000} // use this to pad trend start from the left border
      }
    },
    "layer": [
      {
        "encoding": {
          "color": {
            "field": "ComplaintType",
            "type": "nominal",
            "legend": null,
            "scale": {
                "domain": ["Rat sighting", "Mouse sighting", "Signs of rodents", "Condition attracting rodents"],
                "range": ['#2b3fde', '#8670e6', '#82ad49', '#1d8f3f']
              }
          },
          "y": {"field": "Number", "type": "quantitative", "title": ""}
        },
        "layer": [
          {"mark": {"type": "line", "point": {"size": 100}, "strokeWidth": 4}},
          {
            "transform": [{"filter": {"param": "hover", "empty": false}}],
            "mark": "point"
          },
          {
            "encoding": {
              "x": {"aggregate": "max", "field": "Date"},
              "y": {"aggregate": {"argmax": "Date"}, "field": "Number"}
            },
            "layer": [
              {"mark": {"type": "circle"}},
              {
                "mark": {"type": "text", "align": "left", "dx": 14},
                "encoding": {"text": {"field": "ComplaintType", "type": "nominal"}}
              }
            ]
          }
        ]
      },
      {
        "transform": [
          {"pivot": "ComplaintType", "value": "Number", "groupby": ["Date"]}
        ],
        "mark": "rule",
        "encoding": {
          "opacity": {
            "condition": {"value": 0.3, "param": "hover", "empty": false},
            "value": 0
          },
          "tooltip": [
            {"field": "Rat sighting", "type": "quantitative"},
            {"field": "Mouse sighting", "type": "quantitative"},
            {"field": "Signs of rodents", "type": "quantitative"},
            {"field": "Condition attracting rodents", "type": "quantitative"},
            {"field": "Date", "type": "temporal", "title": "For 6 months ending"}
          ]
        },
        "params": [
          {
            "name": "hover",
            "select": {
              "type": "point",
              "fields": ["Date"],
              "nearest": true,
              "on": "pointerover",
              "clear": "pointerout"
            }
          }
        ]
      },{
        "mark": "rule",
        "encoding": {
          "x": {
            "datum": "1680403200000"          
            },
          "xOffset": {"value": 0.5},
          "color": {"value": "red"},
          "size": {"value": 2},
          "strokeDash": {"value": [2, 2]}
        }
      }
    ]
  }


// ===== INITIAL INSPECTIONS SPEC ================================================== //
var specTwo = {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": "container",
    "height": "container",
    "title": {
      "text": "",
      "subtitlePadding": 10,
      "fontWeight": "normal",
      "anchor": "start",
      "fontSize": 13,
      "font": "sans-serif",
      "baseline": "top",
      "dy": -10,
      "subtitleFontSize": 13
    },
    "config": {
      "view": {"stroke": null},
      "axisX": {"labelAngle": 0, "grid": false, "tickCount": {"interval": "month", "step": 6}},
      "axisY": {"tickCount": 3}
    },
    "data": {
      "url": "initial-inspections.csv"
    },
    "transform": [
      {"filter": "datum.zoneID=='2'"},
      {"filter": "datum.Type!='City agency'"},
      {"filter": "datum.Type!='Private property'"}
    ],
    "encoding": {
      "x": {
        "field": "Date",
        "type": "temporal",
        "title": "",
        "axis": {
          "values": [1656561600000,1672462800000,1688097600000,1703998800000],
          "format": "%b %Y"},
        "scale": {"domainMin": 1650841000000}
      }
    },
    "layer": [
      {
        "encoding": {
          "color": {
            "field": "Type",
            "type": "nominal",
            "legend": null,
            "scale": {
              "domain": ["Initial inspections", "All fail", "Active rat signs"],
              "range": ["#00008B", "#c73866", "#D77393"]
            }
          },
          "y": {"field": "Number", "type": "quantitative", "title": ""}
        },
        "layer": [
            {"mark": {"type": "line", "point": {"size": 100}, "strokeWidth": 4}},
          {
            "transform": [{"filter": {"param": "hover", "empty": false}}],
            "mark": "point"
          },
          {
            "encoding": {
              "x": {"aggregate": "max", "field": "Date"},
              "y": {"aggregate": {"argmax": "Date"}, "field": "Number"}
            },
            "layer": [
              {"mark": {"type": "circle"}},
              {
                "mark": {"type": "text", "align": "left", "dx": 14},
                "encoding": {"text": {"field": "Type", "type": "nominal"}}
              }
            ]
          }
        ]
      },
      {
        "transform": [
          {"pivot": "Type", "value": "Number", "groupby": ["Date"]}
        ],
        "mark": "rule",
        "encoding": {
          "opacity": {
            "condition": {"value": 0.3, "param": "hover", "empty": false},
            "value": 0
          },
          "tooltip": [
            {"field": "Initial inspections", "type": "quantitative"},
            {"field": "All fail", "type": "quantitative","title": "Failed"},
            {"field": "Active rat signs", "type": "quantitative", "title": "Active rat signs"},
            {"field": "Date", "type": "temporal", "title": "For 6 months ending"}
          ]
        },
        "params": [
          {
            "name": "hover",
            "select": {
              "type": "point",
              "fields": ["Date"],
              "nearest": true,
              "on": "pointerover",
              "clear": "pointerout"
            }
          }
        ]
      },{
        "mark": "rule",
        "encoding": {
          "x": {
            "datum": "1680403200000"          
            },
          "xOffset": {"value": 0.5},
          "color": {"value": "red"},
          "size": {"value": 2},
          "strokeDash": {"value": [2, 2]}
        }
      }
    ]
  }


// ===== COMPLIANCE INSPECTIONS SPEC ================================================== //
var specThree = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": "container",
  "title": {
    "text": "",
    "subtitlePadding": 10,
    "fontWeight": "normal",
    "anchor": "start",
    "fontSize": 13,
    "font": "sans-serif",
    "baseline": "top",
    "dy": -10,
    "subtitleFontSize": 13
  },
  "config": {
    "view": {"stroke": null},
    "axisX": {"labelAngle": 0, "grid": false, "tickCount": {"interval": "month", "step": 6}},
    "axisY": {"tickCount": 3}
  },
  "data": {
    "url": "compliance-inspections.csv"
  },
  "transform": [
    {"filter": "datum.zoneID=='2'"},
    {"filter": "datum.Type!='Passed'"},
  ],
  "encoding": {
    "x": {
      "field": "Date",
      "type": "temporal",
      "title": "",
      "axis": {
        "values": [1656561600000,1672462800000,1688097600000,1703998800000],
        "format": "%b %Y"},
      "scale": {"domainMin": 1650841000000}
    }
  },
  "layer": [
    {
      "encoding": {
        "color": {
          "field": "Type",
          "type": "nominal",
          "legend": null,
          "scale": {
            "domain": ["Compliance inspections", "Failed, summons issued", "Active rat signs"],
            "range": ["#00008B", "#c73866", "#D77393"]
          }
        },
        "y": {"field": "Number", "type": "quantitative", "title": ""}
      },
      "layer": [
          {"mark": {"type": "line", "point": {"size": 100}, "strokeWidth": 4}},
        {
          "transform": [{"filter": {"param": "hover", "empty": false}}],
          "mark": "point"
        },
        {
          "encoding": {
            "x": {"aggregate": "max", "field": "Date"},
            "y": {"aggregate": {"argmax": "Date"}, "field": "Number"}
          },
          "layer": [
            {"mark": {"type": "circle"}},
            {
              "mark": {"type": "text", "align": "left", "dx": 14},
              "encoding": {"text": {"field": "Type", "type": "nominal"}}
            }
          ]
        }
      ]
    },
    {
      "transform": [
        {"pivot": "Type", "value": "Number", "groupby": ["Date"]}
      ],
      "mark": "rule",
      "encoding": {
        "opacity": {
          "condition": {"value": 0.3, "param": "hover", "empty": false},
          "value": 0
        },
        "tooltip": [
          {"field": "Compliance inspections", "type": "quantitative"},
          {"field": "Failed, summons issued", "type": "quantitative"},
          {"field": "Active rat signs", "type": "quantitative","title": "Active rat signs"},
          {"field": "Date", "type": "temporal", "title": "For 6 months ending"}
        ]
      },
      "params": [
        {
          "name": "hover",
          "select": {
            "type": "point",
            "fields": ["Date"],
            "nearest": true,
            "on": "pointerover",
            "clear": "pointerout"
          }
        }
      ]
    },{
      "mark": "rule",
      "encoding": {
        "x": {
          "datum": "1680403200000"          
          },
        "xOffset": {"value": 0.5},
        "color": {"value": "red"},
        "size": {"value": 2},
        "strokeDash": {"value": [2, 2]}
      }
    }
  ]
}

// ===== EXTERMINATOR SPEC ================================================== //
specFour = {
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": "container",
  "height": "container",
  "title": {
    "text": "",
    "subtitlePadding": 10,
    "fontWeight": "normal",
    "anchor": "start",
    "fontSize": 13,
    "font": "sans-serif",
    "baseline": "top",
    "dy": -10,
    "subtitleFontSize": 13
  },
  "config": {
    "view": {"stroke": null},
    "axisX": {"labelAngle": 0, "grid": false, "tickCount": {"interval": "month", "step": 6}},
    "axisY": {"tickCount": 3}
  },
  "data": {
    "url": "exterminator-visits.csv"
  },
  "transform": [
    {"filter": "datum.zoneID=='2'"}
  ],
  "encoding": {
    "x": {
      "field": "Date",
      "type": "temporal",
      "title": "",
      "axis": {
        "values": [1656561600000,1672462800000,1688097600000,1703998800000],
        "format": "%b %Y"},
      "scale": {"domainMin": 1650841000000}
    }
  },
  "layer": [
    {
      "encoding": {
        "color": {
          "field": "Thing",
          "type": "nominal",
          "legend": null,
          "scale": {
            "domain": ["Exterminator visits", "Bait applied"],
            "range": ["#00008B", "#c73866"]
          }
        },
        "y": {"field": "Number", "type": "quantitative", "title": ""}
      },
      "layer": [
          {"mark": {"type": "line", "point": {"size": 100}, "strokeWidth": 4}},
        {
          "transform": [{"filter": {"param": "hover", "empty": false}}],
          "mark": "point"
        },
        {
          "encoding": {
            "x": {"aggregate": "max", "field": "Date"},
            "y": {"aggregate": {"argmax": "Date"}, "field": "Number"}
          },
          "layer": [
            {"mark": {"type": "circle"}},
            {
              "mark": {"type": "text", "align": "left", "dx": 14},
              "encoding": {"text": {"field": "Thing", "type": "nominal"}}
            }
          ]
        }
      ]
    },
    {
      "transform": [
        {"pivot": "Thing", "value": "Number", "groupby": ["Date"]}
      ],
      "mark": "rule",
      "encoding": {
        "opacity": {
          "condition": {"value": 0.3, "param": "hover", "empty": false},
          "value": 0
        },
        "tooltip": [
          {"field": "Exterminator visits", "type": "quantitative"},
          {"field": "Bait applied", "type": "quantitative"},
          {"field": "Date", "type": "temporal", "title": "For 6 months ending"}
        ]
      },
      "params": [
        {
          "name": "hover",
          "select": {
            "type": "point",
            "fields": ["Date"],
            "nearest": true,
            "on": "pointerover",
            "clear": "pointerout"
          }
        }
      ]
    },{
      "mark": "rule",
      "encoding": {
        "x": {
          "datum": "1680403200000"          
          },
        "xOffset": {"value": 0.5},
        "color": {"value": "red"},
        "size": {"value": 2},
        "strokeDash": {"value": [2, 2]}
      }
    }
  ]
}

// ===== GET MOST RECENT DATA (INITIAL COMPLIANCE) ================================================== //

  var initialData = [];
  var recent = [];
  var thisRecent = [];
  d3.csv('initial-inspections.csv').then(data => {
    // ingest data
    initialData = data

    // get final date
    var finalPos = initialData.length - 1    
    var mostRecentDate = initialData[finalPos].Date

    // get data for final date installment
    recent = initialData.filter(x => x.Date === mostRecentDate)
  })

    //// ----- Get most recent data for Compliance Inspections ------ ////
  var complianceData = [];
  var complianceRecent = [];
  var thisCompliance = [];
  d3.csv('compliance-inspections.csv').then(data => {
    complianceData = data;
    var finalPosition = complianceData.length - 1
    var mostRecentDate = complianceData[finalPosition].Date
    complianceRecent = complianceData.filter(x => x.Date === mostRecentDate)
  })

  // ===== REDRAW CHARTS ON NEIGHBORHOOD SELECTION ================================================== //

function redrawChart(zoneID) {

  console.log('drawing chart for zone ', zoneID);

  if (zoneID == '4') {
    specOne.layer[2].encoding.color.value = "red";
    specTwo.layer[2].encoding.color.value = "red";
    specThree.layer[2].encoding.color.value = "red";
    specFour.layer[2].encoding.color.value = "red";
    const harlemNotes = document.querySelectorAll('.harlem-note');
    harlemNotes.forEach(note => {
        note.classList.remove('hide');
    });
  } else {
    specOne.layer[2].encoding.color.value = "transparent";
    specTwo.layer[2].encoding.color.value = "transparent";
    specThree.layer[2].encoding.color.value = "transparent";
    specFour.layer[2].encoding.color.value = "transparent";
    const harlemNotes = document.querySelectorAll('.harlem-note');
    harlemNotes.forEach(note => {
        note.classList.add('hide');
    });
  }


  specOne.transform[0].filter = `datum.zoneID == '${zoneID}'`
  vegaEmbed("#vizOne", specOne)

  specTwo.transform[0].filter = `datum.zoneID == '${zoneID}'`
  vegaEmbed("#vizTwo", specTwo)

  specThree.transform[0].filter = `datum.zoneID == '${zoneID}'`
  vegaEmbed("#vizThree", specThree)

  specFour.transform[0].filter = `datum.zoneID == '${zoneID}'`
  vegaEmbed("#vizFour", specFour)
}
